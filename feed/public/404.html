<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // 1. Clean the path (remove any leading /feed)
    const originalPath = window.location.pathname.replace(/^\/feed/, '');
    
    // 2. Only redirect if we're NOT already at /feed/
    if (!window.location.pathname.startsWith('/feed/')) {
      // 3. Store for React Router
      sessionStorage.setItem('redirect', originalPath);
      
      // 4. Build new URL with query/hash
      const newUrl = '/feed' + 
                    (originalPath.startsWith('/') ? originalPath : '/' + originalPath) + 
                    window.location.search + 
                    window.location.hash;
      
      // 5. Single redirect
      window.location.replace(newUrl);
    }
  </script>
</head>
<body>
  <noscript>
    <h1>Enable JavaScript</h1>
    <p><a href="/feed/">Go to homepage</a></p>
  </noscript>
</body>
</html>